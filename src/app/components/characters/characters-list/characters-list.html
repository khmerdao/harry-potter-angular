<div class="characters-container">
  <div class="characters-header">
    <h2 class="characters-title">ğŸ“œ Grimoire des Personnages</h2>
    <p class="characters-subtitle">DÃ©couvrez les sorciers et crÃ©atures magiques du monde de Harry Potter</p>
  </div>

  <div class="magic-scroll-wrapper">
    <table class="magic-table">
      <thead>
        <tr>
          <th class="th-name">
            <span class="th-icon">ğŸ§™</span>
            <span class="th-text">Nom</span>
          </th>
          <th class="th-gender">
            <span class="th-icon">âš¥</span>
            <span class="th-text">Genre</span>
          </th>
          <th class="th-house">
            <span class="th-icon">ğŸ°</span>
            <span class="th-text">Maison</span>
          </th>
          <th class="th-actions">
            <span class="th-icon">âœ¨</span>
            <span class="th-text">Actions</span>
          </th>
        </tr>
      </thead>
      <tbody>
        @for (character of characters(); track character.id) {
          <tr class="character-row" [attr.data-house]="character.house?.toLowerCase()">
            <td class="td-name">
              <div class="character-cell">
                <span class="character-name">{{ character?.name || 'Inconnu' }}</span>
              </div>
            </td>
            <td class="td-gender">
              <span class="gender-badge" [attr.data-gender]="character?.gender?.toLowerCase()">
                {{ character?.gender || 'Inconnu' }}
              </span>
            </td>
            <td class="td-house">
              <span class="house-badge" [attr.data-house]="character.house?.toLowerCase()">
                {{ character?.house || 'Sans maison' }}
              </span>
            </td>
            <td class="td-actions">
              <button (click)="onCharacterClick(character)" class="btn-magic">
                <span class="btn-icon">ğŸ”®</span>
                <span class="btn-text">Voir</span>
              </button>
            </td>
          </tr>
        } @empty {
          <tr class="empty-row">
            <td colspan="4">
              <div class="empty-message">
                <span class="empty-icon">ğŸ“•</span>
                <span class="empty-text">Le grimoire est vide... aucune crÃ©ature magique trouvÃ©e.</span>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<!-- Modal for character details -->
@if (showModal && selectedCharacter) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <button class="modal-close" (click)="closeModal()">âœ•</button>
      <div class="modal-glow"></div>
      <div class="modal-content">
        <app-character-details [character]="selectedCharacter"></app-character-details>
      </div>
      <div class="modal-sparkles">
        <span>âœ¦</span>
        <span>âœ§</span>
        <span>âœ¦</span>
      </div>
    </div>
  </div>
}
